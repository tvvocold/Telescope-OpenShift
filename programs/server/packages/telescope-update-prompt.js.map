{"version":3,"sources":["telescope-update-prompt/lib/server/phone_home.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,gB;AACA,2B;AACA,I;AACA,iD;;AAEA,kB;AACA,uC;AACA,qC;AACA,4B;AACA,yC;AACA,kC;AACA,uC;AACA,K;;AAEA,gD;;AAEA,qB;AACA,W;AACA,oC;AACA,wB;AACA,U;AACA,sB;AACA,mB;AACA,+E;AACA,qB;AACA,O;AACA,K;AACA,G;AACA,E","file":"/packages/telescope-update-prompt.js","sourcesContent":["Meteor.methods({\n  phoneHome: function  () {\n    \n    var url = 'http://version.telescopeapp.org/';\n\n    var params = {\n      currentVersion: telescopeVersion,\n      siteTitle: getSetting('title'),\n      siteUrl: getSiteUrl(),\n      users: Meteor.users.find().count(),\n      posts: Posts.find().count(),\n      comments: Comments.find().count()\n    }\n\n    if(Meteor.user() && isAdmin(Meteor.user())){\n\n      this.unblock();\n      try {\n        var result = HTTP.get(url, {\n          params: params\n        })\n        return result;\n      } catch (e) {\n        // Got a network error, time-out or HTTP error in the 400 or 500 range.\n        return false;\n      }\n    }\n  }\n})"]}