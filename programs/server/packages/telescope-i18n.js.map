{"version":3,"sources":["telescope-i18n/i18n.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA,kB;AACA,mC;AACA,qC;AACA,2C;;AAEA,W;AACA,oC;AACA,mC;AACA,wC;AACA,qC;AACA,U;AACA,8H;AACA,8B;AACA,uC;AACA,4C;AACA,sC;AACA,O;AACA,G;;AAEA,Y;AACA,qC;AACA,oC;AACA,+B;AACA,uB;AACA,wC;AACA,uC;AACA,O;;AAEA,Q;AACA,4B;AACA,C;;AAEA,Q;AACA,8B;AACA,0B;AACA,qE;AACA,Y;AACA,uC;AACA,K;AACA,G;AACA,E;;AAEA,4B;AACA,E;AACA,wB;;AAEA,6B;AACA,qC;AACA,8D;AACA,0D;AACA,4E;AACA,qB;AACA,0C;AACA,2C;AACA,+C;AACA,U;AACA,U;;AAEA,8C;AACA,G;;AAEA,G","file":"/packages/telescope-i18n.js","sourcesContent":["// do this better:\nsetLanguage = function (language) {\n  // Session.set('i18nReady', false);\n  // console.log('i18n loading… '+language)\n\n  // moment\n  Session.set('momentReady', false);\n  // console.log('moment loading…')\n  if (language.toLowerCase() === \"en\") {\n    Session.set('momentReady', true);\n  } else {\n    $.getScript(\"//cdnjs.cloudflare.com/ajax/libs/moment.js/2.5.1/lang/\" + language.toLowerCase() + \".js\", function (result) {\n      moment.locale(language);\n      Session.set('momentReady', true);\n      Session.set('momentLocale', language);\n      // console.log('moment loaded!')\n    });\n  }\n\n  // TAPi18n\n  Session.set(\"TAPi18nReady\", false);\n  // console.log('TAPi18n loading…')\n  TAPi18n.setLanguage(language)\n    .done(function () {\n      Session.set(\"TAPi18nReady\", true);\n      // console.log('TAPi18n loaded!')\n    });\n\n  // T9n\n  T9n.setLanguage(language);\n}\n\ni18n = {\n  t: function (str, options) {\n    if (Meteor.isServer) {\n      return TAPi18n.__(str, options, getSetting('language', 'en')); \n    } else {\n      return TAPi18n.__(str, options); \n    }\n  }\n};\n\nMeteor.startup(function () {\n  \n  if (Meteor.isClient) {\n\n    // doesn't quite work yet\n    // Tracker.autorun(function (c) {\n    //   console.log('momentReady',Session.get('momentReady'))\n    //   console.log('i18nReady',Session.get('i18nReady'))\n    //   var ready = Session.get('momentReady') && Session.get('i18nReady');\n    //   if (ready) {\n    //     Session.set('i18nReady', true);\n    //     Session.set('locale', language);\n    //     console.log('i18n ready! '+language)\n    //   }\n    // });\n\n    setLanguage(getSetting('language', 'en'));\n  }\n\n});\n"]}